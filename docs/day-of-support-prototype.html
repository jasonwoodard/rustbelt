<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rust Belt Bandit Planner</title>
    <style>
        :root {
            --stone-50: #fafaf9;
            --stone-100: #f5f5f4;
            --stone-200: #e7e5e4;
            --stone-300: #d6d3d1;
            --stone-500: #78716c;
            --stone-600: #57534e;
            --stone-700: #44403c;
            --stone-800: #292524;
            --stone-900: #1c1917;
            --teal-50: #f0fdfa;
            --teal-100: #ccfbf1;
            --teal-600: #0d9488;
            --teal-700: #0f766e;
            --teal-800: #115e59;
            --teal-900: #134e4a;
            --blue-50: #eff6ff;
            --blue-700: #1d4ed8;
            --blue-800: #1e40af;
            --emerald-50: #ecfdf5;
            --emerald-700: #047857;
            --emerald-800: #065f46;
            --rose-600: #e11d48;
            --rose-700: #be123c;
            --ring-default: rgba(20, 184, 166, 0.45);
        }
        *, *::before, *::after {
            box-sizing: border-box;
        }
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", Arial, sans-serif;
            background-color: var(--stone-100);
            color: var(--stone-800);
            line-height: 1.5;
        }
        h1, h2, h3 {
            margin: 0;
            font-weight: 600;
            color: var(--stone-900);
        }
        p {
            margin: 0;
        }
        button, input, select {
            font: inherit;
            color: inherit;
        }
        button {
            border: none;
        }
        button:focus-visible, input:focus-visible {
            outline: 2px solid var(--teal-600);
            outline-offset: 2px;
        }
        .focus\:ring-teal-500:focus-visible {
            outline: 2px solid rgba(20, 184, 166, 0.75);
            outline-offset: 2px;
        }
        .container {
            width: 100%;
            margin-left: auto;
            margin-right: auto;
            padding-left: 1rem;
            padding-right: 1rem;
            max-width: 100%;
        }
        @media (min-width: 640px) {
            .container { max-width: 640px; }
        }
        @media (min-width: 768px) {
            .container { max-width: 768px; }
            .md\:p-6 { padding: 1.5rem; }
        }
        @media (min-width: 1024px) {
            .container { max-width: 1024px; }
            .lg\:grid-cols-3 { grid-template-columns: repeat(3, minmax(0, 1fr)); }
            .lg\:col-span-1 { grid-column: span 1 / span 1; }
            .lg\:p-8 { padding: 2rem; }
        }
        @media (min-width: 1280px) {
            .container { max-width: 1280px; }
        }
        .mx-auto { margin-left: auto; margin-right: auto; }
        .mt-1 { margin-top: 0.25rem; }
        .mt-2 { margin-top: 0.5rem; }
        .mt-4 { margin-top: 1rem; }
        .mb-1 { margin-bottom: 0.25rem; }
        .mb-2 { margin-bottom: 0.5rem; }
        .mb-3 { margin-bottom: 0.75rem; }
        .mb-6 { margin-bottom: 1.5rem; }
        .ml-1 { margin-left: 0.25rem; }
        .ml-2 { margin-left: 0.5rem; }
        .ml-3 { margin-left: 0.75rem; }
        .pt-3 { padding-top: 0.75rem; }
        .p-2 { padding: 0.5rem; }
        .p-3 { padding: 0.75rem; }
        .p-4 { padding: 1rem; }
        .px-2 { padding-left: 0.5rem; padding-right: 0.5rem; }
        .px-4 { padding-left: 1rem; padding-right: 1rem; }
        .py-1 { padding-top: 0.25rem; padding-bottom: 0.25rem; }
        .py-2 { padding-top: 0.5rem; padding-bottom: 0.5rem; }
        .gap-2 { gap: 0.5rem; }
        .gap-3 { gap: 0.75rem; }
        .gap-4 { gap: 1rem; }
        .gap-6 { gap: 1.5rem; }
        .space-y-2 > * + * { margin-top: 0.5rem; }
        .space-y-3 > * + * { margin-top: 0.75rem; }
        .space-x-0 > * + * { margin-left: 0; }
        .grid { display: grid; }
        .grid-cols-1 { grid-template-columns: repeat(1, minmax(0, 1fr)); }
        .grid-cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
        .col-span-2 { grid-column: span 2 / span 2; }
        .flex { display: flex; }
        .flex-col { flex-direction: column; }
        .flex-wrap { flex-wrap: wrap; }
        .flex-1 { flex: 1 1 0%; }
        .flex-grow { flex-grow: 1; }
        .items-start { align-items: flex-start; }
        .items-center { align-items: center; }
        .justify-between { justify-content: space-between; }
        .text-center { text-align: center; }
        .text-right { text-align: right; }
        .text-sm { font-size: 0.875rem; line-height: 1.25rem; }
        .text-xs { font-size: 0.75rem; line-height: 1rem; }
        .text-lg { font-size: 1.125rem; line-height: 1.75rem; }
        .text-xl { font-size: 1.25rem; line-height: 1.75rem; }
        .text-2xl { font-size: 1.5rem; line-height: 2rem; }
        .text-3xl { font-size: 1.875rem; line-height: 2.25rem; }
        .font-medium { font-weight: 500; }
        .font-semibold { font-weight: 600; }
        .font-bold { font-weight: 700; }
        .font-mono { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; }
        .text-white { color: #ffffff; }
        .text-blue-700 { color: var(--blue-700); }
        .text-blue-800 { color: var(--blue-800); }
        .text-emerald-700 { color: var(--emerald-700); }
        .text-emerald-800 { color: var(--emerald-800); }
        .text-stone-500 { color: var(--stone-500); }
        .text-stone-600 { color: var(--stone-600); }
        .text-stone-700 { color: var(--stone-700); }
        .text-stone-800 { color: var(--stone-800); }
        .text-stone-900 { color: var(--stone-900); }
        .text-teal-600 { color: var(--teal-600); }
        .text-teal-700 { color: var(--teal-700); }
        .text-teal-800 { color: var(--teal-800); }
        .text-teal-900 { color: var(--teal-900); }
        input[type='radio'].text-teal-600 { accent-color: var(--teal-600); }
        .bg-white { background-color: #ffffff; }
        .bg-stone-50 { background-color: var(--stone-50); }
        .bg-stone-200 { background-color: var(--stone-200); }
        .bg-stone-700 { background-color: var(--stone-700); }
        .bg-teal-50 { background-color: var(--teal-50); }
        .bg-teal-100 { background-color: var(--teal-100); }
        .bg-teal-600 { background-color: var(--teal-600); }
        .bg-blue-50 { background-color: var(--blue-50); }
        .bg-emerald-50 { background-color: var(--emerald-50); }
        .bg-rose-600 { background-color: var(--rose-600); }
        .hover\:bg-teal-700:hover { background-color: var(--teal-700); }
        .hover\:bg-rose-700:hover { background-color: var(--rose-700); }
        .hover\:bg-stone-50:hover { background-color: var(--stone-50); }
        .hover\:bg-stone-800:hover { background-color: var(--stone-800); }
        .w-full { width: 100%; }
        .w-1\/2 { width: 50%; }
        .h-4 { height: 1rem; }
        .w-4 { width: 1rem; }
        .h-48 { height: 12rem; }
        .overflow-y-auto { overflow-y: auto; }
        .border { border: 1px solid var(--stone-200); }
        .border-b { border-bottom: 1px solid currentColor; }
        .border-t-2 { border-top: 2px solid currentColor; }
        .border-dashed { border-style: dashed; }
        .border-stone-100 { border-color: var(--stone-100); }
        .border-stone-200 { border-color: var(--stone-200); }
        .border-stone-300 { border-color: var(--stone-300); }
        .rounded { border-radius: 0.25rem; }
        .rounded-md { border-radius: 0.375rem; }
        .rounded-lg { border-radius: 0.5rem; }
        .rounded-full { border-radius: 9999px; }
        .shadow-sm { box-shadow: 0 1px 2px rgba(15, 23, 42, 0.08); }
        .shadow-md { box-shadow: 0 4px 6px -1px rgba(15, 23, 42, 0.1), 0 2px 4px -2px rgba(15, 23, 42, 0.1); }
        .ring-2 { outline: 2px solid var(--ring-color, var(--ring-default)); outline-offset: 2px; }
        .ring-teal-500 { --ring-color: rgba(20, 184, 166, 0.55); }
        .transition-all, .transition-colors { transition-duration: 150ms; transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1); }
        .transition-all { transition-property: all; }
        .transition-colors { transition-property: color, background-color, border-color, text-decoration-color, fill, stroke; }
        .duration-300 { transition-duration: 300ms; }
        .ease-in-out { transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1); }
        .list-disc { list-style-type: disc; }
        .list-inside { list-style-position: inside; }
        .status-tovisit { background-color: #ffffff; }
        .status-visited { background-color: #dcfce7; color: #166534; }
        .status-dropped { background-color: #fee2e2; color: #991b1b; text-decoration: line-through; }
        .recommendation-stay { color: #0f766e; }
        .recommendation-leave { color: #be123c; }
    </style>
</head>
<body class="text-stone-800">

    <!-- Embedded Itinerary Data -->
    <script id="itinerary-data" type="application/json">
    {
      "runTimestamp": "2025-09-16T12:20:45.494Z",
      "runId": "CL-v1",
      "runNote": "Wednesday, Detroit to Cleveland",
      "days": [
        {
          "dayId": "Wed",
          "stops": [
            { "id": "HCGs1", "name": "Hollywood Casino Greektown", "type": "start", "arrive": "09:00", "depart": "09:00" },
            { "id": "TVAT", "name": "The Vault Antiques & Treasures", "type": "store", "arrive": "10:30", "depart": "11:00", "score": 4.3 },
            { "id": "TCKA", "name": "The Copper Kettle Antiques", "type": "store", "arrive": "11:10", "depart": "11:40", "score": 4.6 },
            { "id": "AVM", "name": "Armory vintage Market", "type": "store", "arrive": "12:37", "depart": "13:07", "score": 4.1 },
            { "id": "BSS", "name": "Big Ship Salvage", "type": "store", "arrive": "13:49", "depart": "14:19", "score": 5.0 },
            { "id": "VWT-Olmstead", "name": "Value World Thrift (Olmstead)", "type": "store", "arrive": "15:25", "depart": "15:55", "score": 4.5 },
            { "id": "VWT-Lakewood", "name": "Value World Thrift (Lakewood)", "type": "store", "arrive": "16:08", "depart": "16:38", "score": 4.5 },
            { "id": "SL", "name": "Sweet Lorain", "type": "store", "arrive": "16:41", "depart": "17:11", "score": 4.9 },
            { "id": "PG", "name": "Paradise Galleria", "type": "store", "arrive": "17:13", "depart": "17:43", "score": 4.1 },
            { "id": "DPHCDe", "name": "Drury Plaza Hotel Cleveland Downtown", "type": "end", "arrive": "17:47", "depart": "17:47" }
          ]
        }
      ]
    }
    </script>

    <div class="container mx-auto p-4 md:p-6 lg:p-8">
        <header class="mb-6">
            <h1 class="text-3xl font-bold text-stone-900">Rust Belt Bandit Planner</h1>
            <p id="run-info" class="text-stone-600 mt-1"></p>
        </header>

        <main class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <!-- Left Column: Itinerary -->
            <section class="lg:col-span-1 bg-white p-4 rounded-lg shadow-sm">
                <h2 class="text-xl font-semibold mb-3">Itinerary</h2>
                <div id="itinerary-list" class="space-y-2">
                    <!-- Itinerary rows will be injected here -->
                </div>
            </section>

            <!-- Middle Column: Decision Panel -->
            <section class="lg:col-span-1 flex flex-col gap-6">
                <div class="bg-white p-4 rounded-lg shadow-sm">
                    <h2 class="text-xl font-semibold mb-1">Current Stop</h2>
                    <p id="current-store-name" class="text-2xl font-bold text-teal-700">Loading...</p>
                    
                    <div id="store-timeline" class="mt-4">
                        <h3 class="text-sm font-medium text-stone-600 mb-2">Visit Timeline</h3>
                        <div class="flex items-center justify-between text-xs text-center">
                            <div class="flex-1">
                                <p id="timeline-arrive-time" class="font-semibold">--:--</p>
                                <p class="text-stone-500">Arrive</p>
                            </div>
                            <div class="flex-1 border-t-2 border-dashed border-stone-300 mx-2"></div>
                             <div class="flex-1">
                                <p id="timeline-mqa-time" class="font-semibold">--:--</p>
                                <p class="text-stone-500">MQA Check-in</p>
                            </div>
                            <div class="flex-1 border-t-2 border-dashed border-stone-300 mx-2"></div>
                            <div class="flex-1">
                                <p class="font-semibold">Now</p>
                                <p class="text-stone-500">Decision</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="bg-white p-4 rounded-lg shadow-sm flex-grow">
                    <h2 class="text-xl font-semibold mb-3">Measured Quality Assessment (MQA)</h2>
                    <div id="mqa-form" class="space-y-3">
                        <p class="text-sm text-stone-600">After 30 minutes, assess the store's quality:</p>
                        <div id="mqa-select" class="grid grid-cols-2 gap-3">
                            <!-- Radio buttons will be injected here -->
                        </div>
                        <div class="flex gap-3 pt-3">
                            <button id="decision-button" class="w-full bg-teal-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-teal-700 transition-colors">Process MQA</button>
                            <button id="bust-button" class="w-1/2 bg-rose-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-rose-700 transition-colors">Bust!</button>
                        </div>
                    </div>
                     <div id="recommendation-display" class="mt-4 text-center">
                        <!-- Recommendation will be shown here -->
                    </div>
                </div>
            </section>

            <!-- Right Column: Dashboard & Log -->
            <section class="lg:col-span-1 flex flex-col gap-6">
                <div class="bg-white p-4 rounded-lg shadow-sm">
                    <h2 class="text-xl font-semibold mb-3">Dashboard</h2>
                    <div class="grid grid-cols-2 gap-4 text-center">
                        <div class="bg-stone-50 p-3 rounded-md">
                            <p class="text-2xl font-bold" id="dashboard-total-stores">0</p>
                            <p class="text-sm text-stone-600">Total Stores</p>
                        </div>
                        <div class="bg-stone-50 p-3 rounded-md">
                            <p class="text-2xl font-bold" id="dashboard-stores-visited">0</p>
                            <p class="text-sm text-stone-600">Stores Visited</p>
                        </div>
                        <div class="bg-stone-50 p-3 rounded-md">
                            <p class="text-2xl font-bold" id="dashboard-avg-jscore">0.0</p>
                            <p class="text-sm text-stone-600">Avg. J-Score</p>
                        </div>
                        <div class="bg-teal-50 p-3 rounded-md">
                            <p class="text-2xl font-bold text-teal-800" id="dashboard-expected-quality">0.0</p>
                            <p class="text-sm text-teal-700">Remaining Posterior μ</p>
                        </div>
                        <div class="bg-teal-50 p-3 rounded-md">
                            <p class="text-2xl font-bold text-teal-800" id="dashboard-pool-uncertainty">±0.0</p>
                            <p class="text-sm text-teal-700">Remaining Uncertainty σ</p>
                        </div>
                        <div class="bg-blue-50 p-3 rounded-md">
                            <p class="text-2xl font-bold text-blue-800" id="dashboard-current-mean">0.0</p>
                            <p class="text-sm text-blue-700">Current Posterior μ</p>
                        </div>
                        <div class="bg-blue-50 p-3 rounded-md">
                            <p class="text-2xl font-bold text-blue-800" id="dashboard-current-uncertainty">±0.0</p>
                            <p class="text-sm text-blue-700">Current Uncertainty σ</p>
                        </div>
                        <div class="bg-emerald-50 p-3 rounded-md col-span-2">
                            <p class="text-2xl font-bold text-emerald-800" id="dashboard-current-ucb">0.0</p>
                            <p class="text-sm text-emerald-700">Current UCB Score</p>
                        </div>
                        <div class="bg-teal-100 p-3 rounded-md col-span-2">
                            <p class="text-2xl font-bold text-teal-900" id="dashboard-remaining-ucb">0.0</p>
                            <p class="text-sm text-teal-900">Remaining UCB Score</p>
                        </div>
                    </div>
                </div>
                <div class="bg-white p-4 rounded-lg shadow-sm flex-grow">
                     <h2 class="text-xl font-semibold mb-3">Trip Log</h2>
                     <div id="trip-log" class="text-sm space-y-2 overflow-y-auto h-48">
                        <p class="text-stone-500">Your decisions will appear here.</p>
                     </div>
                </div>
                <div class="bg-white p-4 rounded-lg shadow-sm">
                     <button id="export-button" class="w-full bg-stone-700 text-white font-bold py-2 px-4 rounded-lg hover:bg-stone-800 transition-colors">Export Trip Data</button>
                </div>
            </section>
        </main>
    </div>

<script src="day-of-support-app.js"></script>

</body>
</html>
